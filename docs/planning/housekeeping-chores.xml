<?xml version="1.0" encoding="UTF-8"?>
<!--
  PR-A: SSRN Housekeeping — Repo metadata, community files, GitHub templates
  Branch: chore/ssrn-final-prep (existing)
  Parent plan: remaining-final-tasks-before-ssrn-repo.md Section 3

  These are all LOW-complexity tasks: templated files, metadata additions.
  No business logic, no frontend code, no schema changes.

  Verification: pre-commit run --all-files (YAML, TOML checks)
-->
<plan version="2.0" project="music-attribution-scaffold">
  <metadata>
    <title>PR-A: SSRN Housekeeping</title>
    <branch>chore/ssrn-final-prep</branch>
    <estimated_tasks>7</estimated_tasks>
    <mode>maintenance</mode>
  </metadata>

  <!-- =================================================================== -->
  <!-- Task 1: pyproject.toml metadata enhancement                         -->
  <!-- =================================================================== -->

  <task id="A1" status="PENDING">
    <title>Enhance pyproject.toml metadata (classifiers, keywords, URLs)</title>
    <priority>P0</priority>
    <phase>1</phase>
    <files>
      <modify>pyproject.toml</modify>
    </files>
    <tdd_spec>
      <test_file>tests/unit/test_project_metadata.py</test_file>
      <test_cases>
        <case>test_pyproject_has_keywords — verify keywords list in [project]</case>
        <case>test_pyproject_classifiers_include_science — verify "Science/Research" in classifiers</case>
        <case>test_pyproject_classifiers_include_license — verify MIT classifier present</case>
        <case>test_pyproject_urls_include_homepage — verify Homepage URL points to DOI</case>
        <case>test_pyproject_urls_include_bug_tracker — verify Bug Tracker URL</case>
      </test_cases>
    </tdd_spec>
    <implementation>
      Add to pyproject.toml [project] section:
      - keywords = ["music", "attribution", "provenance", "AI", "MCP", "confidence-scoring", "conformal-prediction"]
      - Extend classifiers with: "Intended Audience :: Science/Research", "License :: OSI Approved :: MIT License",
        "Topic :: Scientific/Engineering :: Artificial Intelligence", "Topic :: Multimedia :: Sound/Audio :: Analysis",
        "Framework :: FastAPI", "Typing :: Typed"
      - Add to [project.urls]: Homepage (DOI link), "Bug Tracker" (GitHub issues)
    </implementation>
  </task>

  <!-- =================================================================== -->
  <!-- Task 2: CITATION.cff                                                -->
  <!-- =================================================================== -->

  <task id="A2" status="PENDING">
    <title>Create CITATION.cff for GitHub citation widget</title>
    <priority>P0</priority>
    <phase>1</phase>
    <files>
      <create>CITATION.cff</create>
    </files>
    <tdd_spec>
      <test_file>tests/unit/test_project_metadata.py</test_file>
      <test_cases>
        <case>test_citation_cff_exists — verify CITATION.cff exists at repo root</case>
        <case>test_citation_cff_valid_yaml — verify it parses as valid YAML</case>
        <case>test_citation_cff_has_doi — verify doi field contains "10.2139/ssrn.6109087"</case>
        <case>test_citation_cff_has_author — verify Teikari in authors list</case>
      </test_cases>
    </tdd_spec>
    <implementation>
      Create CITATION.cff with CFF v1.2.0 format:
      - type: software
      - authors: Petteri Teikari (ORCID: 0000-0002-0844-8662)
      - repository-code: https://github.com/petteriTeikari/music-attribution-scaffold
      - license: MIT
      - preferred-citation pointing to SSRN paper with DOI 10.2139/ssrn.6109087
    </implementation>
  </task>

  <!-- =================================================================== -->
  <!-- Task 3: CONTRIBUTING.md                                             -->
  <!-- =================================================================== -->

  <task id="A3" status="PENDING">
    <title>Create CONTRIBUTING.md</title>
    <priority>P0</priority>
    <phase>1</phase>
    <files>
      <create>CONTRIBUTING.md</create>
    </files>
    <tdd_spec>
      <test_file>tests/unit/test_project_metadata.py</test_file>
      <test_cases>
        <case>test_contributing_md_exists — verify CONTRIBUTING.md at repo root</case>
        <case>test_contributing_mentions_uv — verify "uv" mentioned (our package manager)</case>
        <case>test_contributing_mentions_precommit — verify pre-commit hooks mentioned</case>
        <case>test_contributing_mentions_tests — verify testing requirements mentioned</case>
      </test_cases>
    </tdd_spec>
    <implementation>
      Standard open-source contribution guide covering:
      - Development setup (make setup)
      - Code style (ruff, mypy, pre-commit)
      - Testing (make test-all)
      - PR process
      - uv-only policy
      - Academic context note (companion to SSRN paper)
    </implementation>
  </task>

  <!-- =================================================================== -->
  <!-- Task 4: SECURITY.md                                                 -->
  <!-- =================================================================== -->

  <task id="A4" status="PENDING">
    <title>Create SECURITY.md</title>
    <priority>P0</priority>
    <phase>1</phase>
    <files>
      <create>SECURITY.md</create>
    </files>
    <tdd_spec>
      <test_file>tests/unit/test_project_metadata.py</test_file>
      <test_cases>
        <case>test_security_md_exists — verify SECURITY.md at repo root</case>
        <case>test_security_mentions_scope — verify "research scaffold" disclaimer</case>
      </test_cases>
    </tdd_spec>
    <implementation>
      Security policy including:
      - Scope (research scaffold, not production)
      - Vulnerability reporting process
      - Supported versions (current only)
      - Reference to scripts/security/compliance_check.py
      - detect-secrets baseline
    </implementation>
  </task>

  <!-- =================================================================== -->
  <!-- Task 5: CHANGELOG.md (closes #43)                                   -->
  <!-- =================================================================== -->

  <task id="A5" status="PENDING">
    <title>Create CHANGELOG.md with retroactive release notes</title>
    <priority>P0</priority>
    <phase>2</phase>
    <files>
      <create>CHANGELOG.md</create>
    </files>
    <tdd_spec>
      <test_file>tests/unit/test_project_metadata.py</test_file>
      <test_cases>
        <case>test_changelog_exists — verify CHANGELOG.md at repo root</case>
        <case>test_changelog_has_unreleased — verify [Unreleased] section</case>
        <case>test_changelog_mentions_version — verify at least one version entry</case>
      </test_cases>
    </tdd_spec>
    <implementation>
      Keep-a-Changelog format with retroactive entries from git log:
      - [Unreleased]
      - [0.6.0] — 2026-02-12 — Housekeeping (PR #51: Playwright E2E, frontend CI, WCAG fixes)
      - [0.5.0] — 2026-02-11 — Academic landing page, Docker-native dev (PRs #46, #48, #49, #50)
      - [0.4.0] — 2026-02-09 — SSRN MVP gate (PR #44: tinytag, display fields, CI)
      - [0.3.0] — 2026-02-06 — Agentic UI (PRs #28, #37, #38: CopilotKit, PydanticAI, AG-UI)
      - [0.2.0] — 2026-02-02 — Frontend UI (PR #3: editorial design system)
      - [0.1.0] — 2026-01-25 — Initial scaffold (PR #1: probabilistic PRD + 5-pipeline implementation)
    </implementation>
  </task>

  <!-- =================================================================== -->
  <!-- Task 6: GitHub Issue Templates                                      -->
  <!-- =================================================================== -->

  <task id="A6" status="PENDING">
    <title>Create .github/ISSUE_TEMPLATE/ directory with 3 templates</title>
    <priority>P0</priority>
    <phase>2</phase>
    <files>
      <create>.github/ISSUE_TEMPLATE/bug_report.md</create>
      <create>.github/ISSUE_TEMPLATE/feature_request.md</create>
      <create>.github/ISSUE_TEMPLATE/research_question.md</create>
    </files>
    <tdd_spec>
      <test_file>tests/unit/test_project_metadata.py</test_file>
      <test_cases>
        <case>test_issue_templates_exist — verify all 3 template files exist</case>
        <case>test_issue_templates_have_frontmatter — verify YAML frontmatter with name/about</case>
      </test_cases>
    </tdd_spec>
    <implementation>
      Three GitHub issue templates with YAML frontmatter:
      - bug_report.md: name "Bug Report", labels: ["bug"], sections for description/steps/expected/actual
      - feature_request.md: name "Feature Request", labels: ["enhancement"], sections for problem/solution/alternatives
      - research_question.md: name "Research Question", labels: ["research"], academic-context section for paper-related questions
    </implementation>
  </task>

  <!-- =================================================================== -->
  <!-- Task 7: PR Template                                                 -->
  <!-- =================================================================== -->

  <task id="A7" status="PENDING">
    <title>Create .github/PULL_REQUEST_TEMPLATE.md</title>
    <priority>P0</priority>
    <phase>2</phase>
    <files>
      <create>.github/PULL_REQUEST_TEMPLATE.md</create>
    </files>
    <tdd_spec>
      <test_file>tests/unit/test_project_metadata.py</test_file>
      <test_cases>
        <case>test_pr_template_exists — verify .github/PULL_REQUEST_TEMPLATE.md exists</case>
        <case>test_pr_template_has_checklist — verify contains checkbox markers "- [ ]"</case>
      </test_cases>
    </tdd_spec>
    <implementation>
      PR template with:
      - Summary section
      - Related issue field
      - Checklist:
        - [ ] Tests pass (make test-all)
        - [ ] Pre-commit hooks pass (pre-commit run --all-files)
        - [ ] Related issue linked
        - [ ] Description provided
        - [ ] Screenshots (if UI changes)
    </implementation>
  </task>

</plan>
