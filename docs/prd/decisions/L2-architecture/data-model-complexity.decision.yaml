# Data Model Complexity
#
# How rich is the data model? Simple relational, graph-enriched,
# or full knowledge graph? Drives database choice and query patterns.

decision_id: data_model_complexity
title: "Data Model Complexity"
description: >
  Determines the structural complexity of the core data model. A simple
  relational model (tables with foreign keys) is fast to build but limits
  attribution network analysis. A graph-enriched model adds relationship
  traversal. A full knowledge graph enables semantic reasoning but
  requires specialized infrastructure.

  For attribution/traceability systems, the entity-relationship structure
  is central: artists have credits on tracks, which belong to releases,
  which are owned by labels, which are registered with PROs. The depth
  of this modeling is a key architectural decision.

decision_level: L2_architecture
status: active
last_updated: 2026-02-10

options:
  - option_id: simple_relational
    title: "Simple Relational"
    description: >
      Standard PostgreSQL tables with foreign keys. Entity relationships
      modeled as join tables. Sufficient for basic attribution queries
      but limited graph traversal capability.
    prior_probability: 0.25
    status: viable

  - option_id: graph_enriched_relational
    title: "Graph-Enriched Relational"
    description: >
      PostgreSQL as primary store with graph extension (Apache AGE)
      for relationship traversal. Best of both worlds: ACID transactions
      for core data, graph queries for network analysis.
    prior_probability: 0.45
    status: recommended
    complements:
      - "graph_strategy.apache_age"
      - "primary_database.postgresql_unified"

  - option_id: full_knowledge_graph
    title: "Full Knowledge Graph"
    description: >
      Dedicated graph database (Neo4j or similar) as primary store
      with RDF/OWL ontology. Enables semantic reasoning, SPARQL
      queries, and formal knowledge representation. High complexity,
      high capability.
    prior_probability: 0.15
    status: experimental
    constraints:
      - "Graph database expertise on team"
      - "Ontology design capacity"

  - option_id: document_centric
    title: "Document-Centric"
    description: >
      Document store (MongoDB-style) with denormalized records.
      Each entity is a self-contained document. Simple to implement
      but makes cross-entity queries and consistency harder.
    prior_probability: 0.15
    status: viable

conditional_on:
  - parent_decision_id: build_vs_buy_posture
    influence_strength: moderate
    conditional_table:
      - given_parent_option: custom_build
        then_probabilities:
          simple_relational: 0.15
          graph_enriched_relational: 0.45
          full_knowledge_graph: 0.25
          document_centric: 0.15
      - given_parent_option: managed_services
        then_probabilities:
          simple_relational: 0.25
          graph_enriched_relational: 0.50
          full_knowledge_graph: 0.10
          document_centric: 0.15
      - given_parent_option: saas_maximalist
        then_probabilities:
          simple_relational: 0.40
          graph_enriched_relational: 0.30
          full_knowledge_graph: 0.05
          document_centric: 0.25

archetype_weights:
  engineer_heavy_startup:
    probability_overrides:
      simple_relational: 0.10
      graph_enriched_relational: 0.45
      full_knowledge_graph: 0.30
      document_centric: 0.15
    rationale: "Engineers can handle graph complexity and value the analytical power."

  musician_first_team:
    probability_overrides:
      simple_relational: 0.45
      graph_enriched_relational: 0.35
      full_knowledge_graph: 0.05
      document_centric: 0.15
    rationale: "Simplicity is paramount. Graph enrichment only if Supabase supports it."

  solo_hacker:
    probability_overrides:
      simple_relational: 0.50
      graph_enriched_relational: 0.25
      full_knowledge_graph: 0.05
      document_centric: 0.20
    rationale: "Solo hackers need the simplest viable model."

  well_funded_startup:
    probability_overrides:
      simple_relational: 0.10
      graph_enriched_relational: 0.45
      full_knowledge_graph: 0.30
      document_centric: 0.15
    rationale: "Can invest in graph infrastructure for competitive advantage."

volatility:
  classification: stable
  last_assessed: 2026-02-10
  next_review: 2026-05-10
  change_drivers:
    - "PostgreSQL graph extension maturity (AGE, pg_graphql)"
    - "Knowledge graph tooling accessibility improvements"

domain_applicability:
  music_attribution: 1.0
  dpp_traceability: 1.0
  generic_graph_rag: 1.0

tags:
  - architecture
  - data-model
  - graph

references:
  - "../data-layer/toc-data-layer.md"
  - "../REJECTED.md"
